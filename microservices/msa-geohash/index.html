<!doctype html>
<html>
    <head>
        <meta content="IE=edge" http-equiv="X-UA-Compatible">
        <meta charset="utf-8">
        <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
        <meta name="description" content="Providing open source RESTful microservices in containers.">

        <title>msa-geohash</title>

        <link href="/stylesheets/sidemenu.css" rel="stylesheet" />
        <link href="/stylesheets/site.css" rel="stylesheet" />
    </head>

    <body class="microservices microservices_msa-geohash microservices_msa-geohash_index">

        <div id="layout">
            <a href="#menu" id="menuLink" class="menu-link">
                <!-- Menu toggle -->
                <span></span>
                <!-- Hamburger icon -->
            </a>

            <div id="menu">
                <div class="pure-menu">
                    <a class="pure-menu-heading" href="/">The MSA</a>

                    <ul class="pure-menu-list">

                        <li class="pure-menu-item">
                            <a href="/" class="pure-menu-link">Homepage</a>
                        </li>

                        <li class="pure-menu-item">
                            <a href="/standard" class="pure-menu-link">The Standard</a>
                        </li>

                        <li class="pure-menu-item">
                            <a href="/templates" class="pure-menu-link">The Templates</a>
                        </li>

                        <li class="pure-menu-item menu-item-divided "></li>

                        <li class="pure-menu-item">
                            <a href="/microservices/" class="pure-menu-item">The Microservices</a>
                        </li>

                            <li class="pure-menu-item">
                                <a href="/microservices/msa-httpbin" class="pure-menu-link">msa-httpbin</a>
                            </li>
                            <li class="pure-menu-item">
                                <a href="/microservices/msa-faker" class="pure-menu-link">msa-faker</a>
                            </li>
                            <li class="pure-menu-item">
                                <a href="/microservices/msa-corpora" class="pure-menu-link">msa-corpora</a>
                            </li>
                            <li class="pure-menu-item">
                                <a href="/microservices/msa-world-factbook" class="pure-menu-link">msa-world-factbook</a>
                            </li>
                            <li class="pure-menu-item">
                                <a href="/microservices/msa-fakeimage" class="pure-menu-link">msa-fakeimage</a>
                            </li>
                            <li class="pure-menu-item">
                                <a href="/microservices/msa-string-similarity" class="pure-menu-link">msa-string-similarity</a>
                            </li>
                            <li class="pure-menu-item">
                                <a href="/microservices/msa-geohash" class="pure-menu-link">msa-geohash</a>
                            </li>

                        <li class="pure-menu-item menu-item-divided "></li>

                        <li class="pure-menu-item">
                            <a href="/contribute" class="pure-menu-link">Contribute</a>
                        </li>

                        <li class="pure-menu-item">
                            <a href="/faq" class="pure-menu-link">FAQ</a>
                        </li>

                    </ul>
                </div>
            </div>

            <div id="main">
                
                <div class="content">

                  <div class="header">
                      <h1>msa-geohash</h1>
                  </div>

                    <p><a href="https://github.com/TheMicroservicesAgency/msa-geohash"><img style="zoom: 1.15; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" /></a></p>

<p>Base32 Geoashing as a service. From wikipedia:</p>

<blockquote>
  <p>Geohash is a geocoding system invented by Gustavo Niemeyer and placed into the public domain. It is a hierarchical spatial data structure which subdivides space into buckets of grid shape.</p>
</blockquote>

<blockquote>
  <p>Geohashes offer properties like arbitrary precision and the possibility of gradually removing characters from the end of the code to reduce its size (and gradually lose precision).</p>
</blockquote>

<p>Built with <a href="https://pypi.python.org/pypi/pygeohash">pygeohash</a> and <a href="https://pypi.python.org/pypi/geojson">geojson</a>.</p>

<h2 id="quick-start">Quick start</h2>

<p>Execute the microservice container with the following command :</p>

<pre><code>docker run -ti -p 9907:80 msagency/msa-geohash
</code></pre>

<h2 id="examples">Example(s)</h2>

<p>To get a geohash from a pair of coordinates, you can use the /encode url :</p>

<pre><code>$ curl 'http://localhost:9907/geohash/encode?lat=45.53617&amp;lon=-73.62075'
{
  "geohash": "f25eh9x52jq4"
}
</code></pre>

<p>The same url also handles geojson points, via a http POST :</p>

<pre><code>$ curl -XPOST 'http://localhost:9907/geohash/encode' -H 'Content-Type: application/json' -d '{
  "coordinates": [
    -73.62075,
    45.53617
  ],
  "type": "Point"
}'

{
  "geohash": "f25eh9x52jq4"
}
</code></pre>

<p>Decoding the geohash will return the coordinates, in geojson :</p>

<pre><code>$ curl 'http://localhost:9907/geohash/decode/f25eh9x52jq4'
{
  "coordinates": [
    -73.62075,
    45.53617
  ],
  "type": "Point"
}
</code></pre>

<p>Geohashes can be shortened to modify the area they cover, this can be evaluated with the /precision url :</p>

<pre><code>$ curl 'http://localhost:9907/geohash/precision/f25eh9x52jq4'
{
  "precision": {
    "number": 0.6,
    "unit": "meters"
  }
}

$ curl 'http://localhost:9907/geohash/precision/f25eh9'
{
  "precision": {
    "number": 610,
    "unit": "meters"
  }
}
</code></pre>

<p>By default the /decode function will return the center of the geohash area, however it's possible to get a more accurate decoding with the <strong>exact=true</strong> parameter. With this parameter a geojson polygon will be returned instead of a point, taking into account the margin of error of the geohash :</p>

<pre><code>$ curl 'http://localhost:9907/geohash/decode/f25eh9?exact=true'
{
  "coordinates": [
    [
      [
        -73.63037109375,
        45.538330078125
      ],
      [
        -73.63037109375,
        45.5328369140625
      ],
      [
        -73.619384765625,
        45.5328369140625
      ],
      [
        -73.619384765625,
        45.538330078125
      ],
      [
        -73.63037109375,
        45.538330078125
      ]
    ]
  ],
  "type": "Polygon"
}
</code></pre>

<h2 id="endpoints">Endpoints</h2>

<ul>
  <li><a href="http://demo.microservices.agency:9907/geohash/encode?lat=45.53617&amp;lon=-73.62075">/geohash/encode/?lat=XX.XX&amp;lon=XX.XX </a> Compute a geohash from the given lat,lon</li>
  <li><a href="http://demo.microservices.agency:9907/geohash/decode/f25eh9x52jq4">/geohash/decode/:geohash</a> Decode a geohash, returns a geojson point</li>
  <li><a href="http://demo.microservices.agency:9907/geohash/decode/f25eh9x52jq4">/geohash/decode/:geohash?exact=true</a> Decodes a geohash, return a geojson polygon</li>
  <li><a href="http://demo.microservices.agency:9907/geohash/precision/f25eh9x52jq4">/geohash/precision/:geohash</a> Estimate the precision of a geohash</li>
</ul>

<h2 id="standard-endpoints">Standard endpoints</h2>

<ul>
  <li><a href="http://demo.microservices.agency:9907/ms/version">/ms/version</a> : returns the version number</li>
  <li><a href="http://demo.microservices.agency:9907/ms/name">/ms/name</a> : returns the name</li>
  <li><a href="http://demo.microservices.agency:9907/ms/readme.md">/ms/readme.md</a> : returns the readme (this file)</li>
  <li><a href="http://demo.microservices.agency:9907/ms/readme.html">/ms/readme.html</a> : returns the readme as html</li>
  <li><a href="http://demo.microservices.agency:9907/swagger/swagger.json">/swagger/swagger.json</a> : returns the swagger api documentation</li>
  <li><a href="http://demo.microservices.agency:9907/swagger/#/">/swagger/#/</a> : returns swagger-ui displaying the api documentation</li>
  <li><a href="http://demo.microservices.agency:9907/nginx/stats.json">/nginx/stats.json</a> : returns stats about Nginx</li>
  <li><a href="http://demo.microservices.agency:9907/nginx/stats.html">/nginx/stats.html</a> : returns a dashboard displaying the stats from Nginx</li>
</ul>

<h2 id="about">About</h2>

<p>A project by the <a href="http://microservices.agency">Microservices Agency</a>.</p>

                </div>

            </div>
        </div>

        <script src="/javascripts/side_menu.js"></script>
        <script src="/javascripts/analytics.js"></script>
    </body>
</html>
